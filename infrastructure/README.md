# Infastructure

Requires aws-cdk

## Useful commands

- `npm run build` compile typescript to js
- `npm run watch` watch for changes and compile
- `npm run test` perform the jest unit tests
- `cdk deploy` deploy this stack to your default AWS account/region
- `cdk diff` compare deployed stack with current state
- `cdk synth` emits the synthesized CloudFormation template

# Database - Server Setup

Set dbName and dbUsername enviroment variables in the .env file.

After deploying to AWS, Secrets Manager will auto generate a password. The Database Credentials are automatically passed to the nodejs server through the fargate enviroment variables.

# Database Setup

DB password is automatiacally generated by AWS Secrets manager

Remote access the database with AWS session manager through the bastion host. No ssh/keys are required.

Session Manager:

1. Go to AWS Systems Manager Dashboard
2. Click on Session Manager on sidebar
3. Click Start New Session
4. Select Bastion Host and click Start Session
5. install psql shell on the bastion host
   sudo amazon-linux-extras install postgresql11
6. connect to the database with the psql shell. host name is avaiable on RDS page, Database name and database username were set in the .env file.
   psql -d name-of-db -h host-name -p port -U username
7. Copy and paste the password from Secrets Manager
8. Copy and paste the create table commands from server/Database/schema.sql

Get DB Password:

1. Go to Secrets Manager Dashboard
2. Click on Secrets in Sidebar
3. Click on Secret generated by CDK
4. Scroll down to Secret Value and Click Retrieve Secret Value

# Machine Learning
